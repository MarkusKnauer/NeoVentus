<ion-header>
  <ion-navbar color="primary">
    <ion-title>Tisch {{deskNumber}}</ion-title><!-- created by Bettina Hartmann-->
  </ion-navbar>
</ion-header>

<ion-content padding-bottom>
  <ion-list padding-bottom="">
    <ng-container *ngFor="let cat of catGroups">
      <ion-item-divider color="light" [hidden]="cat.orders.length == 0">
        <span class="important">{{cat.name}}</span>
      </ion-item-divider>
      <ion-item-sliding *ngFor="let order of cat.orders">
        <ion-item (press)="openProcessingDetailModal(order)">
          {{order.count}}x
          <button icon-only ion-button clear color="secondary" class="order-shortcut"
                  (click)="addTmpOrder(order.item, order.sideDishes, order.guestWish)">
            <ion-icon name="add"></ion-icon>
          </button>
          {{ order.item.name }}
          <span class="side-dish" *ngFor="let side of order.sideDishes"> - {{side.name}}</span>
          <span *ngIf="order.guestWish && order.guestWish.length"> - SW: {{order.guestWish}}</span>
          <span class="right">{{order.item.price * order.count | costDecimal}} €</span>
        </ion-item>
        <!--sliding menu button-->
        <ion-item-options side="right">
          <button ion-button color="danger" (click)="openStornoAction(order, false)">Storno Einzel</button>
          <button *ngIf="order.count > 1" ion-button color="danger" (click)="openStornoAction(order, true)">Storno
            Alle
          </button>
        </ion-item-options>
      </ion-item-sliding>
    </ng-container>

    <!--tmp orders not submitted to server -->
    <ng-container *ngIf="groupedTmpOrders.length">
      <ion-item-divider color="secondary">
        <span class="important">Ausstehend</span>
      </ion-item-divider>
      <ion-item *ngFor="let tmpOrder of groupedTmpOrders">
        <button ion-button clear color="danger" class="order-shortcut" icon-only
                (click)="removeTmpOrder(tmpOrder.item, tmpOrder.sideDishes, tmpOrder.guestWish)">
          <ion-icon name="remove"></ion-icon>
        </button>
        {{tmpOrder.count}}x
        <button class="order-shortcut" clear ion-button icon-only color="secondary"
                (click)="addTmpOrder(tmpOrder.item, tmpOrder.sideDishes, tmpOrder.guestWish)">
          <ion-icon name="add"></ion-icon>
        </button>
        {{tmpOrder.item.name}}
        <span class="side-dish" *ngFor="let side of tmpOrder.sideDishes"> - {{side.name}}</span>
        <span *ngIf="tmpOrder.guestWish && tmpOrder.guestWish.length != 0"> - SW: {{tmpOrder.guestWish}}</span>
        <span class="right secondary-text">
          {{tmpOrder.count * tmpOrder.item.price | costDecimal}} €
        </span>
      </ion-item>
    </ng-container>
    <!--total price -->
    <ion-item padding-vertical>
      <div text-right>
        Total: <b>{{ getTotalPrice() | costDecimal }} €</b>
      </div>
    </ion-item>
  </ion-list>

  <!--floating action button -->
  <ion-fab bottom right>
    <button ion-fab icon-only (click)='openOrderSelectModal()'>
      <ion-icon name="add"></ion-icon>
    </button>
  </ion-fab>
</ion-content>

<!--footer menu -->
<ion-footer>
  <ion-grid>
    <ion-row>
      <ion-col col-3>
        <button ion-button full icon-only color="light4" [disabled]="!orderService.cache[ordersCacheKey]?.length">
          <ion-icon name="move"></ion-icon>
        </button>
      </ion-col>
      <ion-col col-6>
        <button ion-button full icon-left (click)="openBillingModal()"
                [disabled]="!orderService.cache[ordersCacheKey]?.length">
          <ion-icon name="cash"></ion-icon>
          Rechnung
        </button>
      </ion-col>
      <ion-col col-3>
        <button ion-button full icon-only color="secondary" [disabled]="!tmpOrders.length" (click)="submitOrders()">
          <ion-icon name="send"></ion-icon>
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>
